@tailwind base;
@tailwind components;
@tailwind utilities;

/* ... [Keep existing Global Theme, Body, etc.] ... */

:root {
  --bg-dark: #0f172a;
  --bg-panel: #1e293b;
  --accent: #d97706;
}

body {
  font-family: 'Lato', sans-serif;
  background-color: var(--bg-dark);
  color: #e2e8f0;
  overflow: hidden; 
  touch-action: manipulation;
}

h1, h2, h3, .fantasy-font { font-family: 'Cinzel', serif; }
.mono-font { font-family: 'Fira Code', monospace; }

/* ... [Keep existing Utils, Scrollbar, Glass Panel] ... */

.glass-panel {
  background: rgba(30, 41, 59, 0.95);
  border: 1px solid rgba(255, 255, 255, 0.05);
}

.custom-scroll::-webkit-scrollbar { width: 6px; height: 6px; }
.custom-scroll::-webkit-scrollbar-track { background: #0f172a; }
.custom-scroll::-webkit-scrollbar-thumb { background: #334155; border-radius: 3px; }

/* ... [Keep Quill Editor Overrides] ... */
.quill { display: flex; flex-direction: column; height: 100%; }
.ql-toolbar { background-color: #1e293b !important; border-color: #334155 !important; }
.ql-container { flex: 1; background-color: rgba(30, 41, 59, 0.5) !important; border-color: #334155 !important; color: #e2e8f0 !important; font-size: 16px !important; overflow-y: auto; }
.ql-stroke { stroke: #94a3b8 !important; }
.ql-fill { fill: #94a3b8 !important; }
.ql-picker { color: #94a3b8 !important; }
.ql-editor h1 { font-family: 'Cinzel', serif; color: #fbbf24; font-size: 2em; border-bottom: 1px solid #475569; }
.ql-editor img { max-width: 100%; display: block; margin: 10px 0; }
.ql-editor table { width: 100%; border-collapse: collapse; margin: 1em 0; }
.ql-editor td, .ql-editor th { border: 1px solid #475569; padding: 8px; }

/* --- 3D DICE SYSTEM --- */

.die-container {
    position: fixed;
    inset: 0;
    z-index: 9999;
    pointer-events: none;
    perspective: 1200px; /* Stronger perspective for 3D depth */
    display: flex;
    align-items: center;
    justify-content: center;
}

.die-mover {
    position: absolute;
    transform-style: preserve-3d;
    will-change: transform;
}

/* --- ANIMATIONS --- */
@keyframes tumble-complex {
    0% { transform: translate3d(-50vw, -50vh, -500px) rotate3d(1, 1, 1, 0deg) scale(0.5); opacity: 0; }
    20% { opacity: 1; }
    60% { transform: translate3d(0, 0, 0) rotate3d(1, 2, 0.5, 720deg) scale(1.2); } 
    100% { transform: translate3d(0, 0, 0) rotate3d(1, 0, 0, 1080deg) scale(1); }
}

@keyframes land-shock {
    0% { transform: scale(1); }
    50% { transform: scale(1.2); }
    100% { transform: scale(1); }
}

.animate-tumble { animation: tumble-complex 1s cubic-bezier(0.25, 1, 0.5, 1) forwards; }
.animate-land { animation: land-shock 0.3s ease-out; }

/* --- REAL 3D CUBE (D6) --- */
.cube-wrapper {
    width: 100px;
    height: 100px;
    position: relative;
    transform-style: preserve-3d;
}

.face {
    position: absolute;
    width: 100px;
    height: 100px;
    background: linear-gradient(135deg, #1e40af, #172554); /* Blue D6 */
    border: 2px solid #60a5fa;
    border-radius: 12px;
    opacity: 1;
}

/* Position Faces */
.face-front  { transform: rotateY(0deg) translateZ(50px); }
.face-back   { transform: rotateY(180deg) translateZ(50px); }
.face-right  { transform: rotateY(90deg) translateZ(50px); }
.face-left   { transform: rotateY(-90deg) translateZ(50px); }
.face-top    { transform: rotateX(90deg) translateZ(50px); }
.face-bottom { transform: rotateX(-90deg) translateZ(50px); }

.face-content {
    position: absolute;
    inset: 0;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 4rem;
    font-weight: bold;
    color: white;
    transform: translateZ(52px); /* Push text slightly off face */
    text-shadow: 0 4px 10px rgba(0,0,0,0.5);
}

/* --- EXTRUDED SHAPES (D4, D8, D12, D20, D100) --- */
.extrusion-wrapper {
    width: 120px;
    height: 120px;
    position: relative;
    transform-style: preserve-3d;
    display: flex;
    align-items: center;
    justify-content: center;
}

.extrusion-layer {
    position: absolute;
    width: 100%;
    height: 100%;
    opacity: 0.7;
    filter: brightness(0.7); /* Darker sides */
}

.extrusion-front {
    position: absolute;
    width: 100%;
    height: 100%;
    transform: translateZ(1px); /* Front face */
    display: flex;
    align-items: center;
    justify-content: center;
    overflow: hidden; /* Fixes d100 grey box issue */
}

.result-text {
    font-size: 3rem;
    font-weight: bold;
    color: white;
    z-index: 10;
    text-shadow: 0 2px 4px rgba(0,0,0,0.8);
}

.inner-shading {
    position: absolute;
    inset: 0;
    background: radial-gradient(circle at 30% 30%, rgba(255,255,255,0.2), rgba(0,0,0,0.4));
}

/* --- CLIP PATHS --- */
.clip-tri { clip-path: polygon(50% 0%, 0% 100%, 100% 100%); }
.clip-diamond { clip-path: polygon(50% 0%, 100% 50%, 50% 100%, 0% 50%); }
.clip-kite { clip-path: polygon(50% 0%, 100% 70%, 50% 100%, 0% 70%); }
.clip-dodeca { clip-path: polygon(50% 0%, 95% 25%, 95% 75%, 50% 100%, 5% 75%, 5% 25%); }
.clip-hex { clip-path: polygon(25% 0%, 75% 0%, 100% 50%, 75% 100%, 25% 100%, 0% 50%); }
/* d100 uses standard border-radius, no clip-path needed */
